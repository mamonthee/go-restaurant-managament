(function(){"use strict";var e={3807:function(e,t,o){var a=o(3751),s=o(641),l=o(33);const n={id:"app"},r={key:0},i={class:"navbar navbar-expand-lg navbar-dark bg-dark"},d={class:"collapse navbar-collapse",id:"navbarSupportedContent"},c={class:"navbar-nav mr-auto"},u={class:"nav-item"},m={class:"form-inline my-2 my-lg-0 ml-auto"},p={class:"badge"},h={class:"badge",style:{color:"green"}},k={class:"wrapper"},b={class:"list-unstyled"},g={id:"content"},f={key:1},L={class:"modal fade",id:"profileModal",tabindex:"-1",role:"dialog","aria-labelledby":"profileLabel","aria-hidden":"true"},v={class:"modal-dialog modal-lg",role:"document"},y={class:"modal-content"},I={class:"modal-body"},w={class:"form-group row"},_={class:"col-sm-10"},C=["value"],M={class:"form-group row"},E={class:"col-sm-10"},S=["value"],N={class:"modal fade",id:"showNotificationModal",tabindex:"-1",role:"dialog","aria-labelledby":"profileLabel","aria-hidden":"true"},x={class:"modal-dialog modal-lg",role:"document"},U={class:"modal-content"},F={class:"modal-body"},P={key:0},T={key:1},O={key:0},A=["onClick"],D={href:"#",class:"list-group-item list-group-item-action"},R={key:1},X=["onClick"],V={href:"#",class:"list-group-item list-group-item-action"};function $(e,t,o,$,q,J){const K=(0,s.g2)("router-link"),Q=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",n,[J.isLoginPage||J.isInvoicePage?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(Q)])):((0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("nav",i,[t[10]||(t[10]=(0,s.Lk)("a",{class:"navbar-brand",href:"#",style:{"font-weight":"bold"}},"MIMON",-1)),t[11]||(t[11]=(0,s.Lk)("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,s.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,s.Lk)("div",d,[(0,s.Lk)("ul",c,[(0,s.Lk)("li",u,[(0,s.Lk)("button",{type:"button",id:"sidebarCollapse",class:"btn btn-dark",style:{"margin-left":"110px"},onClick:t[0]||(t[0]=(...e)=>J.toggleSidebar&&J.toggleSidebar(...e))},t[6]||(t[6]=[(0,s.Lk)("i",{class:"fas fa-align-left"},null,-1),(0,s.Lk)("span",null,null,-1)]))])])]),(0,s.Lk)("div",m,["KITCHEN"===this.users.user_role?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-light my-2 my-lg-0",style:{"margin-right":"10px"},type:"button",onClick:t[1]||(t[1]=(...e)=>J.viewNotifications&&J.viewNotifications(...e))},[t[7]||(t[7]=(0,s.Lk)("i",{class:"fas fa-bell",style:{"font-size":"22px"}},null,-1)),(0,s.Lk)("span",p,(0,l.v_)(q.notificationCount),1)])):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"btn btn-light my-2 my-lg-0",style:{"margin-right":"10px"},type:"button",onClick:t[2]||(t[2]=(...e)=>J.viewNotifications&&J.viewNotifications(...e))},[t[8]||(t[8]=(0,s.Lk)("i",{class:"fas fa-bell",style:{"font-size":"22px"}},null,-1)),(0,s.Lk)("span",h,(0,l.v_)(q.prepareNotiCount),1)])),(0,s.Lk)("button",{class:"btn btn-light my-2 my-lg-0",style:{"margin-right":"10px"},type:"submit",onClick:t[3]||(t[3]=(...e)=>J.viewProfile&&J.viewProfile(...e))},t[9]||(t[9]=[(0,s.Lk)("i",{class:"fas fa-user"},null,-1),(0,s.eW)(" Profile")])),(0,s.Lk)("button",{class:"btn btn-outline-light my-2 my-sm-0",style:{"margin-right":"10px"},type:"submit",onClick:t[4]||(t[4]=(...e)=>J.logout&&J.logout(...e))},"Signout")])]),(0,s.Lk)("div",k,[(0,s.Lk)("nav",{id:"sidebar",class:(0,l.C4)({active:q.isActive})},[(0,s.Lk)("ul",b,[(0,s.Lk)("li",{class:(0,l.C4)({active:J.isActiveRoute("/menu")})},[(0,s.bF)(K,{to:"/menu"},{default:(0,s.k6)((()=>t[12]||(t[12]=[(0,s.Lk)("i",{class:"fa fa-bars","aria-hidden":"true"},null,-1),(0,s.Lk)("span",null," Menu",-1)]))),_:1})],2),(0,s.Lk)("li",{class:(0,l.C4)({active:J.isActiveRoute("/food")})},[(0,s.bF)(K,{to:"/food"},{default:(0,s.k6)((()=>t[13]||(t[13]=[(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1),(0,s.Lk)("span",null," Food",-1)]))),_:1})],2),(0,s.Lk)("li",{class:(0,l.C4)({active:J.isActiveRoute("/order")})},[(0,s.bF)(K,{to:"/order"},{default:(0,s.k6)((()=>t[14]||(t[14]=[(0,s.Lk)("i",{class:"fas fa-shopping-cart"},null,-1),(0,s.Lk)("span",null,"Order",-1)]))),_:1})],2),(0,s.Lk)("li",{class:(0,l.C4)({active:J.isActiveRoute("/viewOrder")})},[(0,s.bF)(K,{to:"/viewOrder"},{default:(0,s.k6)((()=>t[15]||(t[15]=[(0,s.Lk)("i",{class:"fas fa-list"},null,-1),(0,s.Lk)("span",null,"View Order",-1)]))),_:1})],2),J.isKitchenRole?((0,s.uX)(),(0,s.CE)("li",{key:0,class:(0,l.C4)({active:J.isActiveRoute("/kitchen")})},[(0,s.bF)(K,{to:"/kitchen"},{default:(0,s.k6)((()=>t[16]||(t[16]=[(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1),(0,s.Lk)("span",null,"Kitchen",-1)]))),_:1})],2)):(0,s.Q3)("",!0),(0,s.Lk)("li",{class:(0,l.C4)({active:J.isActiveRoute("/table")})},[(0,s.bF)(K,{to:"/table"},{default:(0,s.k6)((()=>t[17]||(t[17]=[(0,s.Lk)("i",{class:"fas fa-table"},null,-1),(0,s.Lk)("span",null,"Table",-1)]))),_:1})],2),(0,s.Lk)("li",{class:(0,l.C4)({active:J.isActiveRoute("/report")})},[(0,s.bF)(K,{to:"/report"},{default:(0,s.k6)((()=>t[18]||(t[18]=[(0,s.Lk)("i",{class:"fas fa-file-alt"},null,-1),(0,s.Lk)("span",null,"Report",-1)]))),_:1})],2),(0,s.Lk)("li",{class:(0,l.C4)({active:J.isActiveRoute("/administration")})},[(0,s.bF)(K,{to:"/administration"},{default:(0,s.k6)((()=>t[19]||(t[19]=[(0,s.Lk)("i",{class:"fas fa-cog"},null,-1),(0,s.Lk)("span",null,"Administration",-1)]))),_:1})],2)])],2),(0,s.Lk)("div",g,[(0,s.bF)(Q)])])]))]),(0,s.Lk)("div",L,[(0,s.Lk)("div",v,[(0,s.Lk)("div",y,[t[23]||(t[23]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"profileLabel"},"Profile"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",I,[(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...t)=>e.updateItem&&e.updateItem(...t)),["prevent"]))},[(0,s.Lk)("div",w,[t[20]||(t[20]=(0,s.Lk)("label",{for:"updateName",class:"col-sm-2 col-form-label"},"User Name",-1)),(0,s.Lk)("div",_,[(0,s.Lk)("input",{type:"text",class:"form-control",id:"updateName",value:this.userName,disabled:""},null,8,C)])]),(0,s.Lk)("div",M,[t[21]||(t[21]=(0,s.Lk)("label",{for:"updateCategory",class:"col-sm-2 col-form-label"},"Role",-1)),(0,s.Lk)("div",E,[(0,s.Lk)("input",{type:"text",class:"form-control",id:"updateCategory",value:this.userRole,disabled:""},null,8,S)])]),t[22]||(t[22]=(0,s.Lk)("div",{class:"form-group row",style:{"justify-content":"center","margin-top":"30px"}},null,-1))],32)]),t[24]||(t[24]=(0,s.Lk)("div",{class:"modal-footer"},null,-1))])])]),(0,s.Lk)("div",N,[(0,s.Lk)("div",x,[(0,s.Lk)("div",U,[t[26]||(t[26]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"profileLabel"},"Notifications"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",F,[0===q.prepareNotis.length&&"WAITER"===this.users.user_role||0===q.notifications.length&&"KITCHEN"===this.users.user_role?((0,s.uX)(),(0,s.CE)("div",P,"No notifications")):((0,s.uX)(),(0,s.CE)("div",T,["KITCHEN"===this.users.user_role?((0,s.uX)(),(0,s.CE)("div",O,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(q.notifications,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"list-group",key:e.id,onClick:t=>J.viewOrder(e.orderId)},[(0,s.Lk)("a",D,(0,l.v_)(e.orderId),1)],8,A)))),128))])):((0,s.uX)(),(0,s.CE)("div",R,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(q.prepareNotis,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"list-group",key:e.id,onClick:t=>J.viewPrepareStatus(e.orderId)},[(0,s.Lk)("a",V,(0,l.v_)(e.orderId),1)],8,X)))),128))])),t[25]||(t[25]=(0,s.Lk)("div",null,null,-1))]))]),t[27]||(t[27]=(0,s.Lk)("div",{class:"modal-footer"},null,-1))])])])],64)}o(4114);class q{constructor(e){this.url=e,this.connection=null,this.callbacks={}}connect(){this.connection&&this.connection.readyState===WebSocket.OPEN?console.log("WebSocket is already connected"):(this.connection=new WebSocket(this.url),this.connection.onopen=()=>{console.log("WebSocket connection established")},this.connection.onmessage=e=>{this.handleMessage(e)},this.connection.onerror=e=>{console.error("WebSocket error:",e)},this.connection.onclose=()=>{console.log("WebSocket connection closed")})}handleMessage(e){try{const t=JSON.parse(e.data),o=t.event;this.callbacks[o]&&this.callbacks[o].forEach((e=>e(t.payload)))}catch(t){console.error("Error parsing message data:",t,"Data:",e.data)}}on(e,t){this.callbacks[e]||(this.callbacks[e]=[]);const o=this.callbacks[e].some((e=>e===t));o||this.callbacks[e].push(t)}send(e,t){const o=JSON.stringify({event:e,payload:t});this.connection.send(o)}}var J=new q("ws://13.51.198.170:9000/ws"),K=o(4335);const Q=K.A.create({baseURL:"http://13.51.198.170:9000",headers:{"Content-Type":"application/json"}});Q.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),Q.interceptors.response.use((e=>e),(e=>Promise.reject(e)));var j=Q,W=o(454),H=o(6720);const B=(0,H.A)();var G=B,z={name:"App",data(){return{isActive:!1,users:[],user:null,token:null,userId:"",userRole:"",userName:"",isLoggedIn:!!localStorage.getItem("token"),notificationCount:parseInt(localStorage.getItem("notificationCount"))||0,notifications:JSON.parse(localStorage.getItem("notifications"))||[],notificationSound:new Audio(o(808)),showNotificationList:!1,prepareNotis:JSON.parse(localStorage.getItem("prepareNotis"))||[],prepareNotiCount:parseInt(localStorage.getItem("prepareNotiCount"))||0,prepareNotiSound:new Audio(o(5105)),showPrepareNotiList:!1}},computed:{isActiveRoute(){return e=>this.$route.path===e},isLoginPage(){return"/"===this.$route.path||"/login"===this.$route.path||"/signup"===this.$route.path},isInvoicePage(){return console.log("invoice page"),console.log(this.$route.path),this.$route.path.startsWith("/invoice")},isKitchenRole(){return"KITCHEN"===this.users.user_role}},mounted(){G.on("userLoggedIn",(e=>{this.user=e,console.log(this.user),console.log(this.user.userName),this.userName=this.user.userName,this.userRole=this.user.userRole,this.userId=this.user.userId,this.fetchUsers(),J.connect(),J.on("newOrder",(e=>{console.log("Webservice"),this.orderId=e,"KITCHEN"===this.users.user_role&&(this.handleNewOrder(this.orderId),G.emit("refreshOrders"))}))})),this.token=localStorage.getItem("token"),this.userId=localStorage.getItem("userId"),this.userRole=localStorage.getItem("userRole"),this.userName=localStorage.getItem("userName"),console.log("mounted",this.userName),this.allowSoundOnInteraction(),this.profileModal=new W.aF(document.getElementById("profileModal")),this.showNotificationModal=new W.aF(document.getElementById("showNotificationModal"))},methods:{toggleSidebar(){this.isActive=!this.isActive},viewProfile(){console.log("view"),this.profileModal.show()},logout(){console.log("logout"),this.isLoggedIn=!1,localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userRole"),localStorage.removeItem("userName"),localStorage.removeItem("notifications"),localStorage.removeItem("notificationCount"),this.$router.push("/")},async fetchUsers(){try{const e=await j.get(`/users/${this.userId}`,{headers:{token:this.token}});200===e.status?this.users=e.data:window.alert("Error"+e.data.message)}catch(e){e.response&&401===e.response.status?(alert("Your session has expired. Please log in again."),this.$router.push("/")):(console.error("Error fetching items:",e),alert("Failed to load the user from app.vue. Please try again later."))}},viewNotifications(){this.showNotificationModal.show(),this.showNotificationList=!this.showNotificationList},viewOrder(e){this.notifications=this.notifications.filter((t=>t.orderId!==e)),localStorage.setItem("notifications",JSON.stringify(this.notifications)),this.notificationCount=this.notifications.length,localStorage.setItem("notificationCount",this.notificationCount),this.$router.push("/kitchen"),this.showNotificationModal.hide()},viewPrepareStatus(e){console.log("Preparestatus"),this.prepareNotis=this.prepareNotis.filter((t=>t.orderId!==e)),localStorage.setItem("prepareNotis",JSON.stringify(this.prepareNotis)),this.prepareNotiCount=this.prepareNotis.length,localStorage.setItem("prepareNotiCount",this.prepareNotiCount),this.$router.push("/viewOrder"),this.showNotificationModal.hide()},playNotificationSound(){console.log("playNotificationSound"),this.notificationSound.play().catch((e=>{console.error("Error playing sound:",e)}))},playPrepareNotiSound(){this.prepareNotiSound.play().catch((e=>{console.error("Error playing sound:",e)}))},allowSoundOnInteraction(){"KITCHEN"===this.users.user_role?this.notificationSound.play().catch((()=>{})):"WAITER"===this.users.user_role&&this.prepareNotiSound.play().catch((()=>{}))},handleNewOrder(e){console.log("handleNewOrder");const t={id:this.notificationCount+1,orderId:e};this.notifications.push(t),this.notificationCount++,localStorage.setItem("notificationCount",this.notificationCount),localStorage.setItem("notifications",JSON.stringify(this.notifications)),this.playNotificationSound()},handlePrepareStatus(e){const t={id:this.prepareNotiCount+1,orderId:e.order_id};console.log("prepareStatus"),this.prepareNotis.push(t),this.prepareNotiCount++,localStorage.setItem("prepareNotiCount",this.prepareNotiCount),localStorage.setItem("prepareNotis",JSON.stringify(this.prepareNotis)),this.playPrepareNotiSound()}},created(){this.user=G.user,this.$watch((()=>G.user),(e=>{this.user=e,e&&console.log(`User logged in: ${e.userName}`)})),this.isLoggedIn&&(this.userId=localStorage.getItem("userId"),this.fetchUsers()),J.connect(),console.log("CREATED"),J.on("newOrder",(e=>{console.log("Webservice"),this.orderId=e,"KITCHEN"===this.users.user_role&&(this.handleNewOrder(this.orderId),G.emit("refreshOrders"))})),J.on("prepareStatus",(e=>{console.log("prepareStatus"),"WAITER"===this.users.user_role&&this.users.name===this.users.name&&this.handlePrepareStatus(e),console.log(e)}))},beforeUnmount(){G.off("userLoggedIn"),J.off("newOrder"),J.off("prepareStatus"),J.callbacks={},J.connection&&J.connection.close()}},Y=o(6262);const Z=(0,Y.A)(z,[["render",$]]);var ee=Z,te=o(5220);const oe={style:{padding:"17em 0"}},ae={class:"container"},se={class:"row justify-content-center"},le={class:"col-md-6 col-lg-4"},ne={class:"login-wrap p-0"},re={class:"form-group"},ie={class:"form-group"},de={class:"form-group"},ce={class:"checkbox-wrap"},ue={key:0};function me(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("body",{class:"img js-fullheight",style:(0,l.Tr)({backgroundImage:"url("+r.imageUrl+")"})},[(0,s.Lk)("section",oe,[(0,s.Lk)("div",ae,[t[9]||(t[9]=(0,s.Lk)("div",{class:"row justify-content-center"},[(0,s.Lk)("div",{class:"col-md-6 text-center mb-5"},[(0,s.Lk)("h2",{class:"heading-section"},"Login")])],-1)),(0,s.Lk)("div",se,[(0,s.Lk)("div",le,[(0,s.Lk)("div",ne,[t[8]||(t[8]=(0,s.Lk)("h3",{class:"mb-4 text-center"},[(0,s.eW)("Have an account? "),(0,s.Lk)("a",{href:"/signup"},"Signup")],-1)),(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"])),class:"sign-form"},[(0,s.Lk)("div",re,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control loginFormControl","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),placeholder:"Email",required:""},null,512),[[a.Jo,r.username]])]),(0,s.Lk)("div",ie,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:"form-control loginFormControl","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),placeholder:"Enter Password",required:""},null,512),[[a.Jo,r.password]])]),t[7]||(t[7]=(0,s.Lk)("div",{class:"form-group"},[(0,s.Lk)("button",{type:"submit",class:"form-control btn btn-primary loginFormControl"},"Sign In")],-1)),(0,s.Lk)("div",de,[(0,s.Lk)("div",null,[(0,s.Lk)("label",ce,[t[4]||(t[4]=(0,s.eW)("Remember me ")),(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>r.rememberMe=e)},null,512),[[a.lH,r.rememberMe]]),t[5]||(t[5]=(0,s.Lk)("span",null,null,-1))])]),t[6]||(t[6]=(0,s.Lk)("div",null,[(0,s.Lk)("a",{href:"#"},"Forgot Password")],-1))])],32),r.message?((0,s.uX)(),(0,s.CE)("p",ue,(0,l.v_)(r.message),1)):(0,s.Q3)("",!0)])])])])])],4)}var pe={name:"LoginForm",data(){return{username:"",password:"",token:"",rememberMe:!1,message:"  ",imageUrl:o(5906)}},setup(){const e=(0,te.rd)();return{router:e}},methods:{async handleSubmit(){try{console.log("Handling form submission");const e=await j.post("/users/login",{email:this.username,password:this.password,token:this.token});if(this.message=e.data.message||"Login successful",console.log("Message name:",e.data.name),console.log("userId",e.data.user_id),localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.user_id),localStorage.setItem("userRole",e.data.user_role),localStorage.setItem("userName",e.data.name),200===e.status){const t={userId:e.data.user_id,userRole:e.data.user_role,userName:e.data.name};G.emit("userLoggedIn",t),console.log("Login successful, status:",e.status),this.router.push("/menu")}}catch(e){e.response?(this.message=e.response.data.message||"Login failed. Please try again.",console.log(e.response.data.message,"######")):(console.log(e.response),this.message="An unexpected error occurred. Please try again."),window.alert(this.message)}}}};const he=(0,Y.A)(pe,[["render",me]]);var ke=he;const be={style:{padding:"10em 0"}},ge={class:"container"},fe={class:"row justify-content-center"},Le={class:"col-md-6 col-lg-4"},ve={class:"login-wrap p-0"},ye={class:"form-group d-flex align-items-center"},Ie={class:"form-group d-flex align-items-center"},we={class:"form-group d-flex align-items-center"},_e={class:"form-group d-flex align-items-center"},Ce={class:"form-group"},Me={class:"form-group"},Ee={class:"checkbox-wrap"},Se={key:0};function Ne(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("body",{class:"img js-fullheight",style:(0,l.Tr)({backgroundImage:"url("+r.imageUrl+")"})},[(0,s.Lk)("section",be,[(0,s.Lk)("div",ge,[t[14]||(t[14]=(0,s.Lk)("div",{class:"row justify-content-center"},[(0,s.Lk)("div",{class:"col-md-6 text-center mb-5"},[(0,s.Lk)("h2",{class:"heading-section"},"Signup")])],-1)),(0,s.Lk)("div",fe,[(0,s.Lk)("div",Le,[(0,s.Lk)("div",ve,[t[13]||(t[13]=(0,s.Lk)("h3",{class:"mb-4 text-center"},[(0,s.eW)("Have an account? "),(0,s.Lk)("span",null,[(0,s.Lk)("a",{href:"/",style:{color:"#fff"}},"Login")])],-1)),(0,s.Lk)("form",{onSubmit:t[7]||(t[7]=(0,a.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"])),class:"sign-form"},[(0,s.Lk)("div",ye,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control loginFormControl",id:"inputFUserRole","onUpdate:modelValue":t[0]||(t[0]=e=>r.userRole=e),placeholder:"Enter User Role",required:""},null,512),[[a.Jo,r.userRole]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.userRole=e),class:"form-select"},t[8]||(t[8]=[(0,s.Lk)("option",{value:"KITCHEN",class:"selected"},"KITCHEN",-1),(0,s.Lk)("option",{value:"WAITER"},"WAITER",-1),(0,s.Lk)("option",{value:"USER"},"USER",-1)]),512),[[a.u1,r.userRole]])]),(0,s.Lk)("div",Ie,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control loginFormControl",id:"inputName","onUpdate:modelValue":t[2]||(t[2]=e=>r.name=e),placeholder:"Enter Name",required:""},null,512),[[a.Jo,r.name]])]),(0,s.Lk)("div",we,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control loginFormControl",id:"inputFEmail","onUpdate:modelValue":t[3]||(t[3]=e=>r.email=e),placeholder:"Enter Email",required:""},null,512),[[a.Jo,r.email]])]),(0,s.Lk)("div",_e,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control loginFormControl",id:"inputPhone","onUpdate:modelValue":t[4]||(t[4]=e=>r.phone=e),placeholder:"Enter Phone",required:""},null,512),[[a.Jo,r.phone]])]),(0,s.Lk)("div",Ce,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:"form-control loginFormControl","onUpdate:modelValue":t[5]||(t[5]=e=>r.password=e),placeholder:"Enter Password",required:""},null,512),[[a.Jo,r.password]])]),t[12]||(t[12]=(0,s.Lk)("div",{class:"form-group"},[(0,s.Lk)("button",{type:"submit",class:"form-control btn btn-primary loginFormControl"},"Sign Up")],-1)),(0,s.Lk)("div",Me,[(0,s.Lk)("div",null,[(0,s.Lk)("label",Ee,[t[9]||(t[9]=(0,s.eW)("Remember me ")),(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>r.rememberMe=e)},null,512),[[a.lH,r.rememberMe]]),t[10]||(t[10]=(0,s.Lk)("span",null,null,-1))])]),t[11]||(t[11]=(0,s.Lk)("div",null,[(0,s.Lk)("a",{href:"#"},"Forgot Password")],-1))])],32),r.message?((0,s.uX)(),(0,s.CE)("p",Se,(0,l.v_)(r.message),1)):(0,s.Q3)("",!0)])])])])])],4)}var xe={name:"SignupForm",data(){return{userRole:"",name:"",email:"",phone:"",password:"",token:"",rememberMe:!1,message:"  ",imageUrl:o(5906)}},setup(){const e=(0,te.rd)();return{router:e}},methods:{async handleSubmit(){try{console.log("Handling form submission");const e=await j.post("/users/signup",{user_role:this.userRole,name:this.name,email:this.email,phone:this.phone,password:this.password,token:this.token});this.message=e.data.message||"Login successful",console.log("Message:",this.message),console.log(e.data.token),localStorage.setItem("token",e.data.token),200===e.status&&(console.log("Signup successful, status:",e.status),this.router.push("/"))}catch(e){e.response?this.message=e.response.data.message||"Login failed. Please try again.":this.message="An unexpected error occurred. Please try again."}}}};const Ue=(0,Y.A)(xe,[["render",Ne]]);var Fe=Ue;function Pe(e,t,o,l,n,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[t[6]||(t[6]=(0,s.eW)("` ")),(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>r.login&&r.login(...e)),["prevent"]))},[t[3]||(t[3]=(0,s.Lk)("label",{for:"username"},"Username:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>n.formData.username=e),required:""},null,512),[[a.Jo,n.formData.username]]),t[4]||(t[4]=(0,s.Lk)("label",{for:"password"},"Password:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.formData.password=e),required:""},null,512),[[a.Jo,n.formData.password]]),t[5]||(t[5]=(0,s.Lk)("button",{type:"submit"},"Login",-1))],32)],64)}var Te={name:"DashboardPage",data(){return{formData:{username:"",password:""}}},methods:{login(){console.log(this.formData)}}};const Oe=(0,Y.A)(Te,[["render",Pe]]);var Ae=Oe;const De={class:"menu-page"},Re={style:{"margin-left":"25px"}},Xe={class:"row d-flex justify-content-between",style:{margin:"15px"}},Ve={class:"col-auto"},$e={class:"col-auto"},qe={class:"section table-section card border-0 shadow"},Je={class:"table-responsive"},Ke={class:"table table-hover"},Qe={class:"list-inline m-0"},je={class:"list-inline-item"},We=["onClick"],He={class:"modal fade",id:"addMenuModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Be={class:"modal-dialog modal-lg",role:"document"},Ge={class:"modal-content"},ze={class:"modal-body"},Ye={class:"form-group row"},Ze={class:"col-sm-10"},et={class:"form-group row"},tt={class:"col-sm-10"},ot={class:"form-group row btn-groups",style:{display:"flex",gap:"15px","margin-top":"30px"}},at={class:"modal fade",id:"updateMenuModal",tabindex:"-1",role:"dialog","aria-labelledby":"updateMenuLabel","aria-hidden":"true"},st={class:"modal-dialog modal-lg",role:"document"},lt={class:"modal-content"},nt={class:"modal-body"},rt={class:"form-group row"},it={class:"col-sm-10"},dt={class:"form-group row"},ct={class:"col-sm-10"},ut={class:"form-group row btn-groups"};function mt(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",De,[t[21]||(t[21]=(0,s.Lk)("h2",{class:"text-center"},"Menu Page",-1)),(0,s.Lk)("div",Re,[(0,s.Lk)("div",Xe,[(0,s.Lk)("div",Ve,[(0,s.Lk)("button",{type:"button",class:"btn btn-success btn-lg",onClick:t[0]||(t[0]=(...e)=>i.showModal&&i.showModal(...e))},"Add Menu")]),(0,s.Lk)("div",$e,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.searchQuery=e),type:"text",class:"filter",placeholder:"Search..."},null,512),[[a.Jo,r.searchQuery]])])]),(0,s.Lk)("div",qe,[(0,s.Lk)("div",Je,[(0,s.Lk)("table",Ke,[t[11]||(t[11]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"#"),(0,s.Lk)("th",null,"Item Name"),(0,s.Lk)("th",null,"Category"),(0,s.Lk)("th",null,"Action")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.filteredItems,((e,o)=>((0,s.uX)(),(0,s.CE)("tr",{key:o},[(0,s.Lk)("td",null,(0,l.v_)(o+1),1),(0,s.Lk)("td",null,(0,l.v_)(e.name),1),(0,s.Lk)("td",null,(0,l.v_)(e.category),1),(0,s.Lk)("td",null,[(0,s.Lk)("ul",Qe,[(0,s.Lk)("li",je,[(0,s.Lk)("button",{class:"btn btn-success btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit",onClick:t=>i.openEditModal(e.menu_id,e.name,e.category,e.start_date,e.end_date)},t[10]||(t[10]=[(0,s.Lk)("i",{class:"fa fa-edit"},null,-1)]),8,We)])])])])))),128))])])]),(0,s.Lk)("div",He,[(0,s.Lk)("div",Be,[(0,s.Lk)("div",Ge,[t[15]||(t[15]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"Add Menu"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",ze,[(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>i.addItem&&i.addItem(...e)),["prevent"]))},[(0,s.Lk)("div",Ye,[t[12]||(t[12]=(0,s.Lk)("label",{for:"staticName",class:"col-sm-2 col-form-label"},"Name",-1)),(0,s.Lk)("div",Ze,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"staticName","onUpdate:modelValue":t[2]||(t[2]=e=>r.name=e),required:""},null,512),[[a.Jo,r.name]])])]),(0,s.Lk)("div",et,[t[13]||(t[13]=(0,s.Lk)("label",{for:"inputCategory",class:"col-sm-2 col-form-label"},"Category",-1)),(0,s.Lk)("div",tt,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"inputCategory","onUpdate:modelValue":t[3]||(t[3]=e=>r.category=e),required:""},null,512),[[a.Jo,r.category]])])]),(0,s.Lk)("div",ot,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",id:"btnClose",onClick:t[4]||(t[4]=(...e)=>i.closeAddMenuModal&&i.closeAddMenuModal(...e))},"Close"),t[14]||(t[14]=(0,s.Lk)("input",{type:"submit",class:"btn btn-primary",id:"btnAdd",value:"Create Menu"},null,-1))])],32)])])])])]),(0,s.Lk)("div",at,[(0,s.Lk)("div",st,[(0,s.Lk)("div",lt,[t[19]||(t[19]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"updateMenuLabel"},"Update Menu"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",nt,[(0,s.Lk)("form",{onSubmit:t[9]||(t[9]=(0,a.D$)(((...e)=>i.updateItem&&i.updateItem(...e)),["prevent"]))},[(0,s.Lk)("div",rt,[t[16]||(t[16]=(0,s.Lk)("label",{for:"updateName",class:"col-sm-2 col-form-label"},"Name",-1)),(0,s.Lk)("div",it,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"updateName","onUpdate:modelValue":t[6]||(t[6]=e=>r.editName=e),required:""},null,512),[[a.Jo,r.editName]])])]),(0,s.Lk)("div",dt,[t[17]||(t[17]=(0,s.Lk)("label",{for:"updateCategory",class:"col-sm-2 col-form-label"},"Category",-1)),(0,s.Lk)("div",ct,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"updateCategory","onUpdate:modelValue":t[7]||(t[7]=e=>r.editCategory=e),required:""},null,512),[[a.Jo,r.editCategory]])])]),(0,s.Lk)("div",ut,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",id:"btnClose",onClick:t[8]||(t[8]=(...e)=>i.closeUpdateMenuModal&&i.closeUpdateMenuModal(...e))},"Close"),t[18]||(t[18]=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",id:"btnUpdate"},"Update Menu",-1))])],32)]),t[20]||(t[20]=(0,s.Lk)("div",{class:"modal-footer"},null,-1))])])])])])}var pt={name:"MenuPage",data(){return{searchQuery:"",items:[],token:null,name:"",category:"",editMenuId:null,editName:"",editCategory:"",start_date:"",end_date:"",username:"",password:""}},computed:{filteredItems(){return this.items.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{async fetchItems(){try{const e=await j.get("/menus",{headers:{token:this.token}});200===e.data.status?this.items=e.data.data:window.alert("Error"+e.data.message)}catch(e){e.response&&401===e.response.status?(alert("Your session has expired. Please log in again."),this.$router.push("/")):(console.error("Error fetching items:",e),alert("Failed to load the menu. Please try again later."))}},showModal(){this.addMenuModal.show()},async addItem(){const e={name:this.name,category:this.category};try{const t=await j.post("/menus",e,{headers:{token:this.token}});200===t.status?(console.log("Item added successfully!"),this.fetchItems(),this.addMenuModal._isShown?(this.name="",this.category="",this.addMenuModal.hide()):console.log("Modal is hidden.")):console.log("Failed to add item. Status:",t.status)}catch(t){console.error("Error adding item:",t)}},searchItem(){console.log("Search query:",this.searchQuery)},closeAddMenuModal(){this.addMenuModal.hide()},closeUpdateMenuModal(){this.updateMenuModal.hide()},openEditModal(e,t,o,a,s){this.editMenuId=e,this.editName=t,this.editCategory=o,this.start_date=a,this.end_date=s,this.updateMenuModal.show()},async updateItem(){const e={menu_id:this.editMenuId,name:this.editName,category:this.editCategory,start_date:this.start_date,end_date:this.end_date};try{const t=await j.patch(`/menus?menu_id=${this.editMenuId}`,e,{headers:{token:this.token}});200===t.status?(this.updateMenuModal.hide(),this.fetchItems()):(this.updateMenuModal.hide(),window.alert("Failed To update"))}catch(t){console.error("Error updating item:",t)}}},mounted(){this.token=localStorage.getItem("token"),this.addMenuModal=new W.aF(document.getElementById("addMenuModal")),this.updateMenuModal=new W.aF(document.getElementById("updateMenuModal")),this.fetchItems()}};const ht=(0,Y.A)(pt,[["render",mt],["__scopeId","data-v-08356d00"]]);var kt=ht;const bt={class:"food-page"},gt={style:{"margin-left":"25px"}},ft={class:"row d-flex justify-content-between",style:{margin:"15px"}},Lt={class:"col-auto"},vt={class:"col-auto"},yt={class:"section table-section card border-0 shadow"},It={class:"table-responsive"},wt={class:"table table-hover"},_t={class:"list-inline m-0"},Ct={class:"list-inline-item"},Mt=["onClick"],Et={class:"modal fade",id:"addFoodModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},St={class:"modal-dialog modal-lg",role:"document"},Nt={class:"modal-content"},xt={class:"modal-body"},Ut={class:"form-group row"},Ft={class:"col-sm-10"},Pt=["value"],Tt={class:"form-group row"},Ot={class:"col-sm-10"},At={class:"form-group row"},Dt={class:"col-sm-10"},Rt={class:"form-group row"},Xt={class:"col-sm-10"},Vt={class:"form-group row btn-groups",style:{"justify-content":"center","margin-top":"30px"}},$t={class:"modal fade",id:"updateFoodModal",tabindex:"-1",role:"dialog","aria-labelledby":"updateMenuLabel","aria-hidden":"true"},qt={class:"modal-dialog modal-lg",role:"document"},Jt={class:"modal-content"},Kt={class:"modal-body"},Qt={class:"form-group row"},jt={class:"col-sm-10"},Wt=["value"],Ht={class:"form-group row"},Bt={class:"col-sm-10"},Gt={class:"form-group row"},zt={class:"col-sm-10"},Yt={class:"form-group row"},Zt={class:"col-sm-10"},eo=["src"],to={class:"form-group row",style:{"justify-content":"center","margin-top":"30px","flex-wrap":"nowrap"}};function oo(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",bt,[(0,s.Lk)("div",gt,[(0,s.Lk)("div",ft,[(0,s.Lk)("div",Lt,[(0,s.Lk)("button",{type:"button",class:"btn btn-success btn-lg",onClick:t[0]||(t[0]=(...e)=>i.showModal&&i.showModal(...e))},"Add Food")]),(0,s.Lk)("div",vt,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.searchQuery=e),type:"text",class:"filter",placeholder:"Search..."},null,512),[[a.Jo,r.searchQuery]])])]),(0,s.Lk)("div",yt,[(0,s.Lk)("div",It,[(0,s.Lk)("table",wt,[t[15]||(t[15]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"#"),(0,s.Lk)("th",null,"Food Name"),(0,s.Lk)("th",null,"Price"),(0,s.Lk)("th",null,"Category"),(0,s.Lk)("th",null,"Action")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.filteredItems,((e,o)=>((0,s.uX)(),(0,s.CE)("tr",{key:o},[(0,s.Lk)("td",null,(0,l.v_)(o+1),1),(0,s.Lk)("td",null,(0,l.v_)(e.name),1),(0,s.Lk)("td",null,(0,l.v_)(e.price),1),(0,s.Lk)("td",null,(0,l.v_)(i.getCategoryName(e.menu_id)),1),(0,s.Lk)("td",null,[(0,s.Lk)("ul",_t,[(0,s.Lk)("li",Ct,[(0,s.Lk)("button",{class:"btn btn-success btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit",onClick:t=>i.openEditModal(e.food_id,e.name,e.price,e.menu_id)},t[14]||(t[14]=[(0,s.Lk)("i",{class:"fa fa-edit"},null,-1)]),8,Mt)])])])])))),128))])])]),(0,s.Lk)("div",Et,[(0,s.Lk)("div",St,[(0,s.Lk)("div",Nt,[t[22]||(t[22]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"Add Food"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",xt,[(0,s.Lk)("form",{onSubmit:t[7]||(t[7]=(0,a.D$)(((...e)=>i.addItem&&i.addItem(...e)),["prevent"]))},[(0,s.Lk)("div",Ut,[t[17]||(t[17]=(0,s.Lk)("label",{for:"staticName",class:"col-sm-2 col-form-label"},"Select Menu",-1)),(0,s.Lk)("div",Ft,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.menuId=e),class:"form-select"},[t[16]||(t[16]=(0,s.Lk)("option",{disabled:"",value:"",class:"selected"},"Please Select Food",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.menuItems,(e=>((0,s.uX)(),(0,s.CE)("option",{value:e.menu_id,key:e.menu_id},(0,l.v_)(e.category),9,Pt)))),128))],512),[[a.u1,r.menuId]])])]),(0,s.Lk)("div",Tt,[t[18]||(t[18]=(0,s.Lk)("label",{for:"staticName",class:"col-sm-2 col-form-label"},"Name",-1)),(0,s.Lk)("div",Ot,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"staticName","onUpdate:modelValue":t[3]||(t[3]=e=>r.name=e),required:""},null,512),[[a.Jo,r.name]])])]),(0,s.Lk)("div",At,[t[19]||(t[19]=(0,s.Lk)("label",{for:"inputPrice",class:"col-sm-2 col-form-label"},"Price",-1)),(0,s.Lk)("div",Dt,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"inputPrice","onUpdate:modelValue":t[4]||(t[4]=e=>r.price=e),required:""},null,512),[[a.Jo,r.price]])])]),(0,s.Lk)("div",Rt,[t[20]||(t[20]=(0,s.Lk)("label",{for:"inputImage",class:"col-sm-2 col-form-label"},"Upload Image",-1)),(0,s.Lk)("div",Xt,[(0,s.Lk)("input",{type:"file",class:"form-control-file",id:"inputImage",onChange:t[5]||(t[5]=(...e)=>i.handleImageUpload&&i.handleImageUpload(...e))},null,32)])]),(0,s.Lk)("div",Vt,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",id:"btnClose",onClick:t[6]||(t[6]=(...e)=>i.closeAddFoodModal&&i.closeAddFoodModal(...e))},"Close"),t[21]||(t[21]=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",id:"btnAdd"},"Create Food",-1))])],32)])])])])]),(0,s.Lk)("div",$t,[(0,s.Lk)("div",qt,[(0,s.Lk)("div",Jt,[t[28]||(t[28]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"updateMenuLabel"},"Update Food"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",Kt,[(0,s.Lk)("form",{onSubmit:t[13]||(t[13]=(0,a.D$)(((...e)=>i.updateItem&&i.updateItem(...e)),["prevent"]))},[(0,s.Lk)("div",Qt,[t[23]||(t[23]=(0,s.Lk)("label",{for:"staticName",class:"col-sm-2 col-form-label"},"Select Menu",-1)),(0,s.Lk)("div",jt,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.editMenuId=e),class:"form-select"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.menuItems,(e=>((0,s.uX)(),(0,s.CE)("option",{value:e.menu_id,key:e.menu_id},(0,l.v_)(e.name),9,Wt)))),128))],512),[[a.u1,r.editMenuId]])])]),(0,s.Lk)("div",Ht,[t[24]||(t[24]=(0,s.Lk)("label",{for:"updateName",class:"col-sm-2 col-form-label"},"Food Name",-1)),(0,s.Lk)("div",Bt,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"updateName","onUpdate:modelValue":t[9]||(t[9]=e=>r.editName=e),required:""},null,512),[[a.Jo,r.editName]])])]),(0,s.Lk)("div",Gt,[t[25]||(t[25]=(0,s.Lk)("label",{for:"updatePrice",class:"col-sm-2 col-form-label"},"Price",-1)),(0,s.Lk)("div",zt,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"updatePrice","onUpdate:modelValue":t[10]||(t[10]=e=>r.editPrice=e),required:""},null,512),[[a.Jo,r.editPrice]])])]),(0,s.Lk)("div",Yt,[t[26]||(t[26]=(0,s.Lk)("label",{for:"foodImage",class:"col-sm-2 col-form-label"},"Food Image",-1)),(0,s.Lk)("div",Zt,[(0,s.Lk)("input",{type:"file",class:"form-control",id:"foodImage",onChange:t[11]||(t[11]=(...e)=>i.handleFileUpload&&i.handleFileUpload(...e)),required:""},null,32),r.foodImagePreview?((0,s.uX)(),(0,s.CE)("img",{key:0,src:r.foodImagePreview,alt:"Food Image Preview",style:{"margin-top":"10px","max-width":"100%",height:"auto"}},null,8,eo)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",to,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",style:{"margin-right":"10px","line-height":"30px",width:"auto",padding:"10px 20px",background:"#db1f1f"},onClick:t[12]||(t[12]=(...e)=>i.closeUpdateFoodModal&&i.closeUpdateFoodModal(...e))},"Close"),t[27]||(t[27]=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",style:{background:"#007bff !important",color:"#fff !important","line-height":"30px",width:"auto",padding:"10px 20px"}},"Update Food",-1))])],32)])])])])])])}var ao={name:"FoodPage",data(){return{selected:null,options:[{value:"A",text:"Option A (from options prop)"},{value:"B",text:"Option B (from options prop)"}],searchQuery:"",items:[],menuItems:[],menuId:"",token:null,name:"",price:"",foodImage:null,foodImagePreview:null,editMenuId:null,editFoodId:"",editName:"",editPrice:"",start_date:"",end_date:"",username:"",password:""}},computed:{filteredItems(){return this.items.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{handleImageUpload(){const e=event.target.files[0];if(e){const t=new FileReader;t.onload=e=>{this.foodImage=e.target.result},t.readAsDataURL(e)}},handleFileUpload(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{this.foodImage=e.target.result},e.readAsDataURL(t)}},async getMenus(){try{const e=await j.get("/menus",{headers:{token:this.token}});200===e.data.status?this.menuItems=e.data.data:window.alert("Error"+e.data.message)}catch(e){console.error("Error fetching menu items : ",e)}},getCategoryName(e){const t=this.menuItems.find((t=>t.menu_id===e));return t?t.name:"Unknown"},async fetchItems(){try{const e=await j.get("/foods",{headers:{token:this.token}});200===e.data.status?(console.log(e.data.data[0].food_items),this.items=e.data.data[0].food_items):window.alert("Error"+e.data.message)}catch(e){e.response&&401===e.response.status?(alert("Your session has expired. Please log in again."),this.$router.push("/")):(console.error("Error fetching items:",e),alert("Failed to load the foods. Please try again later."))}},showModal(){this.addFoodModal.show()},async addItem(){if(console.log("this.foodImage"+this.foodImage),console.log(this.menuId+"MENUID"),!this.menuId)return void window.alert("Please Select Menu");if(!this.foodImage)return void window.alert("Please upload a food image.");const e={name:this.name,price:parseInt(this.price),food_image:this.foodImage,menu_id:this.menuId};try{const t=await j.post("/foods",e,{headers:{token:this.token}});200===t.status?(console.log("Item added successfully!"),this.fetchItems(),this.addFoodModal._isShown?(this.name="",this.price="",this.menuId=null,this.addFoodModal.hide()):console.log("Modal is hidden.")):(console.log("Failed to add item. Status:",t.status),window.alert(t.status))}catch(t){console.error("Error adding item:",t)}},searchItem(){console.log("Search query:",this.searchQuery)},closeAddFoodModal(){this.addFoodModal.hide()},closeUpdateFoodModal(){this.updateFoodModal.hide()},openEditModal(e,t,o,a){this.editFoodId=e,this.editMenuId=a,this.editName=t,this.editPrice=o,this.updateFoodModal.show()},async updateItem(){const e={menu_id:this.editMenuId,name:this.editName,food_image:this.foodImage,price:this.editPrice};try{const t=await j.patch(`/foods/${this.editFoodId}`,e,{headers:{token:this.token}});200===t.status?(this.updateFoodModal.hide(),this.fetchItems()):(this.updateFoodModal.hide(),window.alert("Failed To update"))}catch(t){console.error("Error updating item:",t)}}},mounted(){this.token=localStorage.getItem("token"),this.addFoodModal=new W.aF(document.getElementById("addFoodModal")),this.updateFoodModal=new W.aF(document.getElementById("updateFoodModal")),this.fetchItems(),this.getMenus()}};const so=(0,Y.A)(ao,[["render",oo],["__scopeId","data-v-475c3f89"]]);var lo=so;const no={class:"table-page"},ro={class:"row",style:{"margin-left":"25px"}},io={class:"col-md-8"},co=["value"],uo={class:"d-flex flex-wrap"},mo={class:"card",style:{width:"18rem","margin-right":"10px"}},po=["src"],ho={class:"card-body"},ko={class:"card-title"},bo={class:"card-text"},go=["onClick"],fo={class:"col-md-4 card"},Lo={class:"table table-hover"},vo=["onClick"],yo=["onClick"],Io={style:{"text-align":"center","margin-top":"500px","margin-bottom":"10px"}},wo={key:0,style:{"text-align":"center"}};function _o(e,t,o,n,r,i){const d=(0,s.g2)("MenuList"),c=(0,s.g2)("InvoiceForm");return(0,s.uX)(),(0,s.CE)("div",no,[t[11]||(t[11]=(0,s.Lk)("h2",{class:"text-center"},"Create Order",-1)),(0,s.Lk)("div",ro,[(0,s.Lk)("div",io,[t[7]||(t[7]=(0,s.Lk)("label",{class:"col-sm-2 col-form-label"},"Select Menu",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.selectedTable=e),class:"form-select mb-3",style:{width:"300px",height:"50px"},onChange:t[1]||(t[1]=(...e)=>i.getTableNumber&&i.getTableNumber(...e))},[t[6]||(t[6]=(0,s.Lk)("option",{value:""},"Please Select Table",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.tables,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.table_id,value:e.table_id,style:{height:"50px"}},(0,l.v_)(e.table_number)+" (Guests: "+(0,l.v_)(e.number_of_guests)+") ",9,co)))),128))],544),[[a.u1,r.selectedTable]]),t[8]||(t[8]=(0,s.Lk)("h3",null,"Menus",-1)),(0,s.bF)(d,{onMenuId:i.getFoods},null,8,["onMenuId"]),(0,s.Lk)("div",uo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.foodItems,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.food_id},[(0,s.Lk)("div",mo,[(0,s.Lk)("img",{class:"card-img-top",src:e.food_image,alt:"Card image cap"},null,8,po),(0,s.Lk)("div",ho,[(0,s.Lk)("h5",ko,(0,l.v_)(e.name),1),(0,s.Lk)("p",bo,"Price :$ "+(0,l.v_)(e.price),1),(0,s.Lk)("a",{href:"#",class:"btn btn-primary",onClick:t=>i.addItemToOrder(e)},"Add To Order",8,go)])])])))),128))])]),(0,s.Lk)("div",fo,[t[10]||(t[10]=(0,s.Lk)("h3",{class:"text-center"},"Order Items",-1)),(0,s.Lk)("table",Lo,[t[9]||(t[9]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Price"),(0,s.Lk)("th",null,"Quantity"),(0,s.Lk)("th",null,"Amount"),(0,s.Lk)("th"),(0,s.Lk)("th",null,"Action")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.orderItems,(o=>((0,s.uX)(),(0,s.CE)("tr",{key:o.id},[(0,s.Lk)("td",null,(0,l.v_)(o.name),1),(0,s.Lk)("td",null,(0,l.v_)(o.unit_price),1),(0,s.Lk)("td",null,(0,l.v_)(o.quantity),1),(0,s.Lk)("td",null,(0,l.v_)(o.unit_price*o.quantity),1),(0,s.Lk)("td",null,[(0,s.Lk)("input",{type:"button",onClick:e=>i.decreaseQuantity(o),value:"-"},null,8,vo),(0,s.Lk)("span",null,(0,l.v_)(o.quantity),1),(0,s.Lk)("input",{type:"button",onClick:e=>i.increaseQuantity(o),value:"+"},null,8,yo)]),(0,s.Lk)("td",null,[(0,s.Lk)("button",{onClick:t[2]||(t[2]=t=>i.removeItem(e.index)),class:"btn btn-danger btn-sm"},"Remove")])])))),128))])]),(0,s.Lk)("div",null,[(0,s.Lk)("div",null,[(0,s.Lk)("strong",null,"Total Amount: "+(0,l.v_)(i.totalAmount),1)])]),(0,s.Lk)("div",Io,[r.orderCreated?((0,s.uX)(),(0,s.CE)("input",{key:1,type:"button",class:"btn btn-lg btn-success",onClick:t[4]||(t[4]=(...e)=>i.printInvoice&&i.printInvoice(...e)),value:"Print Invoice"})):((0,s.uX)(),(0,s.CE)("input",{key:0,type:"button",class:"btn btn-lg",onClick:t[3]||(t[3]=(...e)=>i.createOrder&&i.createOrder(...e)),style:{background:"#306ddb",color:"#fff"},value:"Create Order"})),(0,s.Lk)("input",{type:"button",class:"btn btn-lg",onClick:t[5]||(t[5]=(...e)=>i.cancelOrder&&i.cancelOrder(...e)),style:{background:"rgb(219 146 48)",color:"#fff","margin-left":"20px"},value:"Cancel"})]),r.showInvoice?((0,s.uX)(),(0,s.CE)("div",wo,[(0,s.bF)(c,{invoice:e.invoice,onSubmitInvoice:e.saveInvoice,readOnly:!1},null,8,["invoice","onSubmitInvoice"])])):(0,s.Q3)("",!0)])]),t[12]||(t[12]=(0,s.Lk)("div",null,null,-1))])}const Co={class:""},Mo={class:"d-flex"},Eo=["onClick"];function So(e,t,o,a,n,r){return(0,s.uX)(),(0,s.CE)("div",Co,[(0,s.Lk)("div",Mo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.menus,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.menu_id,class:"mb-3"},[(0,s.Lk)("button",{style:{"margin-right":"20px"},type:"button",class:"btn btn-secondary",onClick:t=>r.clickMenu(e.menu_id)},(0,l.v_)(e.name),9,Eo)])))),128))])])}var No={data(){return{token:null,menus:[]}},methods:{async fetchMenu(){try{const e=await j.get("/menus",{headers:{token:this.token}});200===e.data.status?(this.menus=e.data.data,this.menus.length>0&&this.clickMenu(this.menus[0].menu_id)):window.alert("Error"+e.data.message)}catch(e){e.response&&401===e.response.status?(alert("Your session has expired. Please log in again."),this.$router.push("/")):(console.error("Error fetching items:",e),alert("Failed to load the menu. Please try again later."))}},clickMenu(e){this.$emit("menuId",e)}},mounted(){this.token=localStorage.getItem("token"),this.fetchMenu()}};const xo=(0,Y.A)(No,[["render",So]]);var Uo=xo,Fo={name:"OrdersPage",components:{MenuList:Uo},data(){return{token:null,selectedTable:"",selectedTableNumber:null,tables:[],orderItems:[],foodItems:[],quantities:[1,1,1],orderCreated:!1,showInvoice:!1,insertedOrderId:"",userName:"",userId:""}},computed:{totalAmount(){return this.orderItems.reduce(((e,t)=>e+t.unit_price*t.quantity),0)},totalQuantity(){return this.orderItems.reduce(((e,t)=>e+t.quantity),0)}},methods:{getTableNumber(){const e=this.tables.find((e=>e.table_id===this.selectedTable));this.selectedTableNumber=e?e.table_number:null},async fetchTables(){try{const e=await j.get("/tables",{headers:{token:this.token}});this.tables=e.data.data}catch(e){e.response&&401===e.response.status?(alert("Your session has expired. Please log in again."),this.$router.push("/")):(console.error("Error fetching items:",e),alert("Failed to load the table. Please try again later."))}},addItemToOrder(e){if(console.log(e),console.log("ID"),console.log(this.selectedTable),""==this.selectedTable)window.alert("Please select Table");else{const t={quantity:1,unit_price:e.price,food_id:e.food_id,name:e.name,order_id:""};this.orderItems.push(t)}},async getFoods(e){console.log("menuId",e);try{const t=await j.get(`/foodsbymenu/${e}`,{headers:{token:this.token}});200===t.data.status?(console.log(t.data.data),this.foodItems=t.data.data):window.alert("Error"+t.data.message)}catch(t){console.error("Error fetching items:",t)}},increaseQuantity(e){e.quantity++},decreaseQuantity(e){e.quantity>1&&e.quantity--},removeItem(e){this.orderItems.splice(e,1)},async createOrder(){if(null==this.selectedTable)window.alert("Please select Table");else{const t={table_id:this.selectedTable,table_number:parseInt(this.selectedTableNumber),Total_amount:this.totalAmount,Total_quantity:this.totalQuantity,Created_by:this.userName,User_id:this.userId,Order_items:this.orderItems};try{const e=await j.post("/orderItems",t,{headers:{token:this.token}});200===e.status?(console.log("OrderItem added successfully!",e.data.order_id),this.insertedOrderId=e.data.order_id,this.orderCreated=!0):(console.log("Failed to add item. Status:",e.status),window.alert(e.status))}catch(e){console.error("Error adding item:",e)}}},cancelOrder(){this.clearOrderData()},printInvoice(){this.showInvoice=!0;const e=this.insertedOrderId,t=this.$router.resolve({name:"InvoiceForm",params:{orderId:e}}).href;window.open(t,"_blank")},closeInvoice(){this.showInvoice=!1},handleStorageChange(e){"iTable_numbernvoiceCreated"===e.key&&"true"===e.newValue&&(this.clearOrderData(),localStorage.removeItem("invoiceCreated"))},clearOrderData(){this.orderCreated=!1,this.orderItems=[],this.orderData={order_id:"",table_number:"",total_count:0,payment_due:0}},beforeDestroy(){window.removeEventListener("storage",this.handleStorageChange)},async notifyKitchen(){try{const e=await j.post("/notifyKitchen",{orderItems:this.orderItems,table:this.selectedTable},{headers:{token:this.token}});200===e.status&&console.log("Kitchen notified successfully!")}catch(e){console.error("Error notifying kitchen:",e)}}},mounted(){this.token=localStorage.getItem("token"),this.userName=localStorage.getItem("userName"),this.userId=localStorage.getItem("userId"),this.fetchTables(),window.addEventListener("storage",this.handleStorageChange),window.addEventListener("storage",(e=>{"orderUpdated"===e.key&&this.clearOrderData()}))}};const Po=(0,Y.A)(Fo,[["render",_o]]);var To=Po;const Oo={style:{"margin-left":"25px"}},Ao=["onClick"],Do={key:0,style:{"text-align":"center"}};function Ro(e,t,o,a,n,r){const i=(0,s.g2)("InvoiceForm");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Oo,[t[1]||(t[1]=(0,s.Lk)("h2",null,"Orders",-1)),(0,s.Lk)("table",null,[t[0]||(t[0]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Order ID"),(0,s.Lk)("th",null,"Table Number"),(0,s.Lk)("th",null,"Order Date"),(0,s.Lk)("th",null,"Qty"),(0,s.Lk)("th",null,"Total Amount"),(0,s.Lk)("th",null,"Prepare Status"),(0,s.Lk)("th",null,"Paid Status"),(0,s.Lk)("th",null,"Action")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.orders,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,l.v_)(e.order_id),1),(0,s.Lk)("td",null,(0,l.v_)(e.table_id),1),(0,s.Lk)("td",null,(0,l.v_)(new Date(e.created_at).toLocaleDateString()),1),(0,s.Lk)("td",null,(0,l.v_)(e.total_quantity),1),(0,s.Lk)("td",null,(0,l.v_)(e.total_amount),1),(0,s.Lk)("td",null,(0,l.v_)(e.prepare_status),1),(0,s.Lk)("td",null,(0,l.v_)(e.status),1),(0,s.Lk)("td",null,["PAID"!==e.status?((0,s.uX)(),(0,s.CE)("input",{key:0,type:"button",class:"btn btn-warning",value:"details",onClick:t=>r.viewDetails(e.order_id)},null,8,Ao)):(0,s.Q3)("",!0)])])))),128))])])]),n.invoiceFormVisible?((0,s.uX)(),(0,s.CE)("div",Do,[(0,s.bF)(i,{invoice:n.orders,onSubmitInvoice:e.saveInvoice,readOnly:!1},null,8,["invoice","onSubmitInvoice"])])):(0,s.Q3)("",!0)],64)}const Xo={class:"container"},Vo={class:"d-flex justify-content-between mt-5"},$o={style:{"font-weight":"bold",color:"black","font-size":"20px"}},qo={class:"mt-5 mb-5"},Jo={style:{"font-size":"22px"}},Ko={style:{"font-size":"22px"}},Qo={class:"table table-bordered"},jo={class:"form-group row"},Wo={class:"col-sm-8"},Ho={key:0,style:{"text-align":"right"}},Bo={class:"form-group row"},Go={class:"col-sm-8"},zo={key:0},Yo={key:0,type:"submit",class:"btn btn-success m-2 no-print",value:"Save Invoice"};function Zo(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",Xo,[(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>i.submitInvoice&&i.submitInvoice(...e)),["prevent"]))},[(0,s.Lk)("div",Vo,[t[4]||(t[4]=(0,s.Lk)("div",{style:{"font-weight":"bold",color:"black","font-size":"20px"}},"Dine In",-1)),(0,s.Lk)("div",$o,"Date : "+(0,l.v_)(this.today),1)]),(0,s.Lk)("div",qo,[(0,s.Lk)("h3",Jo,[t[5]||(t[5]=(0,s.Lk)("span",{style:{"font-weight":"200",color:"black"}},"Invoice Number : ",-1)),(0,s.eW)((0,l.v_)(o.orderId),1)]),(0,s.Lk)("h3",Ko,[t[6]||(t[6]=(0,s.Lk)("span",{style:{"font-weight":"200",color:"black"}},"Table Number: ",-1)),(0,s.eW)((0,l.v_)(this.orderData.table_number),1)])]),(0,s.Lk)("table",Qo,[t[8]||(t[8]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Product Name"),(0,s.Lk)("th",null,"Price"),(0,s.Lk)("th",null,"Quantity"),(0,s.Lk)("th",null,"Total")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.orderItems,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.order_id},[(0,s.Lk)("td",null,(0,l.v_)(e.food_name),1),(0,s.Lk)("td",null,(0,l.v_)(e.price),1),(0,s.Lk)("td",null,(0,l.v_)(e.quantity),1),(0,s.Lk)("td",null,(0,l.v_)(e.quantity*e.price),1)])))),128))]),(0,s.Lk)("tfoot",null,[(0,s.Lk)("tr",null,[t[7]||(t[7]=(0,s.Lk)("th",{colspan:"3"},"Total Amount",-1)),(0,s.Lk)("th",null,(0,l.v_)(this.orderData.payment_due),1)])])]),(0,s.Lk)("div",jo,[t[10]||(t[10]=(0,s.Lk)("label",{for:"staticName",class:"col-sm-4 col-form-label"},"Payment Method : ",-1)),(0,s.Lk)("div",Wo,[o.readOnly?((0,s.uX)(),(0,s.CE)("span",Ho,(0,l.v_)(r.payment_method),1)):(0,s.bo)(((0,s.uX)(),(0,s.CE)("select",{key:1,"onUpdate:modelValue":t[0]||(t[0]=e=>r.payment_method=e),class:"form-select"},t[9]||(t[9]=[(0,s.Lk)("option",{value:"CASH",class:"selected"},"CASH",-1),(0,s.Lk)("option",{value:"CARD"},"CARD",-1)]),512)),[[a.u1,r.payment_method]])])]),(0,s.Lk)("div",Bo,[t[12]||(t[12]=(0,s.Lk)("label",{for:"staticName",class:"col-sm-4 col-form-label"},"Paid Status : ",-1)),(0,s.Lk)("div",Go,[o.readOnly?((0,s.uX)(),(0,s.CE)("span",zo,(0,l.v_)(r.payment_status),1)):(0,s.bo)(((0,s.uX)(),(0,s.CE)("select",{key:1,"onUpdate:modelValue":t[1]||(t[1]=e=>r.payment_status=e),class:"form-select"},t[11]||(t[11]=[(0,s.Lk)("option",{value:"PAID",class:"selected"},"PAID",-1),(0,s.Lk)("option",{value:"UNPAID"},"UNPAID",-1)]),512)),[[a.u1,r.payment_status]])])]),o.readOnly?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("input",Yo)),o.readOnly?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("input",{key:1,type:"button",style:{background:"gray"},class:"btn btn-md btn-success no-print",onClick:t[2]||(t[2]=(...e)=>i.printInvoice&&i.printInvoice(...e)),value:"Print"}))],32)])}var ea={name:"InvoiceForm",data(){return{token:null,orderItems:[],orderData:{order_id:"",table_number:"",total_count:0,payment_due:0},today:"",payment_method:"CASH",payment_status:"PAID"}},props:{orderId:{type:String,required:!0},readOnly:{type:Boolean,default:!1}},mounted(){this.token=localStorage.getItem("token"),this.getToday(),this.getOrderItems()},methods:{getToday(){const e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");this.today=`${t}-${o}-${a}`},async submitInvoice(){const e={order_id:this.orderId,payment_method:this.payment_method,payment_status:this.payment_status||"PENDING"};console.log(e);try{const t=await j.post("/invoices",e,{headers:{token:this.token}});200===t.status?(console.log("Invoice added successfully!"),localStorage.setItem("invoiceCreated","true"),window.alert("Invoice added successfully!"),localStorage.setItem("orderUpdated",Date.now().toString()),console.log("submitInvoice successfully"),window.close()):console.log("Failed to add item. Status:",t.status)}catch(t){console.error("Error adding item:",t)}},async getOrderItems(){try{console.log("token",this.token),console.log("OrderId",this.orderId);const e=await j.get(`/orderItems-order/${this.orderId}`,{headers:{token:this.token}});200===e.status&&(this.orderData.table_number=e.data[0].table_number,this.orderData.total_count=e.data[0].total_count,this.orderData.payment_due=e.data[0].payment_due,this.orderItems=e.data[0].order_items,console.log(this.orderItems))}catch(e){console.log("Error",e)}},printInvoice(){this.$emit("update:readOnly",!0),window.print()}}};const ta=(0,Y.A)(ea,[["render",Zo],["__scopeId","data-v-214e0b56"]]);var oa=ta,aa={name:"ViewOrderPage",components:{InvoiceForm:oa},data(){return{orders:[],token:null,invoiceFormVisible:!1}},mounted(){window.addEventListener("storage",(e=>{"orderUpdated"===e.key&&this.fetchOrders()})),this.token=localStorage.getItem("token"),this.fetchOrders()},methods:{async fetchOrders(){try{const e=await j.get("/orders",{headers:{token:this.token}});this.orders=e.data}catch(e){console.log("Error fetching orders:",e)}},viewDetails(e){const t=this.$router.resolve({name:"InvoiceForm",params:{orderId:e}}).href;window.open(t,"_blank")}}};const sa=(0,Y.A)(aa,[["render",Ro],["__scopeId","data-v-981da582"]]);var la=sa;const na={class:"table-page"},ra={style:{"margin-left":"25px"}},ia={class:"row d-flex justify-content-between",style:{margin:"15px"}},da={class:"col-auto"},ca={class:"col-auto"},ua={class:"section table-section card border-0 shadow"},ma={class:"table-responsive"},pa={class:"table table-hover"},ha={class:"list-inline m-0"},ka={class:"list-inline-item"},ba=["onClick"],ga={class:"modal fade",id:"addTableModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},fa={class:"modal-dialog modal-lg",role:"document"},La={class:"modal-content"},va={class:"modal-body"},ya={class:"form-group row"},Ia={class:"col-sm-10"},wa={class:"form-group row"},_a={class:"col-sm-10"},Ca={class:"form-group row form-check form-switch"},Ma={class:"col-sm-10"},Ea={class:"form-group row",style:{"justify-content":"center","margin-top":"30px"}},Sa={class:"modal fade",id:"updateTableModal",tabindex:"-1",role:"dialog","aria-labelledby":"updateTableLabel","aria-hidden":"true"},Na={class:"modal-dialog modal-lg",role:"document"},xa={class:"modal-content"},Ua={class:"modal-body"},Fa={class:"form-group row"},Pa={class:"col-sm-10"},Ta={class:"form-group row"},Oa={class:"col-sm-10"},Aa={class:"form-group row form-check form-switch"},Da={class:"col-sm-10"},Ra={class:"form-group row",style:{"justify-content":"center","margin-top":"30px"}};function Xa(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",na,[(0,s.Lk)("div",ra,[(0,s.Lk)("div",ia,[(0,s.Lk)("div",da,[(0,s.Lk)("button",{type:"button",class:"btn btn-success btn-lg",onClick:t[0]||(t[0]=(...e)=>i.showModal&&i.showModal(...e))},"Create Table")]),(0,s.Lk)("div",ca,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.searchQuery=e),type:"text",class:"filter",placeholder:"Search..."},null,512),[[a.Jo,r.searchQuery]])])]),(0,s.Lk)("div",ua,[(0,s.Lk)("div",ma,[(0,s.Lk)("table",pa,[t[13]||(t[13]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"#"),(0,s.Lk)("th",null,"Table Number"),(0,s.Lk)("th",null,"Number of guests"),(0,s.Lk)("th",null,"Availiable"),(0,s.Lk)("th",null,"Status"),(0,s.Lk)("th",null,"Action")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.filteredItems,((e,o)=>((0,s.uX)(),(0,s.CE)("tr",{key:o},[(0,s.Lk)("td",null,(0,l.v_)(o+1),1),(0,s.Lk)("td",null,(0,l.v_)(e.table_number),1),(0,s.Lk)("td",null,(0,l.v_)(e.number_of_guests),1),(0,s.Lk)("td",null,(0,l.v_)(e.availiable),1),(0,s.Lk)("td",null,(0,l.v_)(e.status),1),(0,s.Lk)("td",null,[(0,s.Lk)("ul",ha,[(0,s.Lk)("li",ka,[(0,s.Lk)("button",{class:"btn btn-success btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit",onClick:t=>i.openEditModal(e.table_id,e.table_number,e.number_of_guests,e.status)},t[12]||(t[12]=[(0,s.Lk)("i",{class:"fa fa-edit"},null,-1)]),8,ba)])])])])))),128))])])])]),(0,s.Lk)("div",ga,[(0,s.Lk)("div",fa,[(0,s.Lk)("div",La,[t[18]||(t[18]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"Add Table"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",va,[(0,s.Lk)("form",{onSubmit:t[6]||(t[6]=(0,a.D$)(((...e)=>i.addItem&&i.addItem(...e)),["prevent"]))},[(0,s.Lk)("div",ya,[t[14]||(t[14]=(0,s.Lk)("label",{for:"staticName",class:"col-sm-2 col-form-label"},"Table Number",-1)),(0,s.Lk)("div",Ia,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"staticName","onUpdate:modelValue":t[2]||(t[2]=e=>r.tableNumber=e),required:""},null,512),[[a.Jo,r.tableNumber]])])]),(0,s.Lk)("div",wa,[t[15]||(t[15]=(0,s.Lk)("label",{for:"inputCategory",class:"col-sm-2 col-form-label"},"Number Of Guests",-1)),(0,s.Lk)("div",_a,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"inputCategory","onUpdate:modelValue":t[3]||(t[3]=e=>r.numOfGuest=e),required:""},null,512),[[a.Jo,r.numOfGuest]])])]),(0,s.Lk)("div",Ca,[t[16]||(t[16]=(0,s.Lk)("label",{class:"form-check-label col-sm-2",for:"flexSwitchCheckDefault"},"Status",-1)),(0,s.Lk)("div",Ma,[(0,s.bo)((0,s.Lk)("input",{class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=e=>r.status=e),style:{width:"60px",height:"25px"},type:"checkbox",id:"flexSwitchCheckDefault"},null,512),[[a.lH,r.status]])])]),(0,s.Lk)("div",Ea,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",style:{"margin-right":"25px","line-height":"30px",width:"110px",background:"#db1f1f"},onClick:t[5]||(t[5]=(...e)=>i.closeAddTableModal&&i.closeAddTableModal(...e))},"Close"),t[17]||(t[17]=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",style:{background:"#007bff !important",color:"#fff !important",width:"120px"}},"Create Table",-1))])],32)])])])]),(0,s.Lk)("div",Sa,[(0,s.Lk)("div",Na,[(0,s.Lk)("div",xa,[t[23]||(t[23]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"updateTableLabel"},"Update Table"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",Ua,[(0,s.Lk)("form",{onSubmit:t[11]||(t[11]=(0,a.D$)(((...e)=>i.updateItem&&i.updateItem(...e)),["prevent"]))},[(0,s.Lk)("div",Fa,[t[19]||(t[19]=(0,s.Lk)("label",{for:"updateTableNumber",class:"col-sm-2 col-form-label"},"Table Number",-1)),(0,s.Lk)("div",Pa,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"updateTableNumber","onUpdate:modelValue":t[7]||(t[7]=e=>r.editTableNumber=e),required:""},null,512),[[a.Jo,r.editTableNumber]])])]),(0,s.Lk)("div",Ta,[t[20]||(t[20]=(0,s.Lk)("label",{for:"updateNumOfGuest",class:"col-sm-2 col-form-label"},"Number Of Guests",-1)),(0,s.Lk)("div",Oa,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"updateNumOfGuest","onUpdate:modelValue":t[8]||(t[8]=e=>r.editNumOfGuest=e),required:""},null,512),[[a.Jo,r.editNumOfGuest]])])]),(0,s.Lk)("div",Aa,[t[21]||(t[21]=(0,s.Lk)("label",{class:"form-check-label col-sm-2",for:"flexSwitchCheckDefault"},"Status",-1)),(0,s.Lk)("div",Da,[(0,s.bo)((0,s.Lk)("input",{class:"form-check-input","onUpdate:modelValue":t[9]||(t[9]=e=>r.editStatus=e),style:{width:"60px",height:"25px"},type:"checkbox",id:"flexSwitchCheckDefault"},null,512),[[a.lH,r.editStatus]])])]),(0,s.Lk)("div",Ra,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",style:{"margin-right":"25px","line-height":"30px",width:"110px",background:"#db1f1f"},onClick:t[10]||(t[10]=(...e)=>i.closeUpdateTableModal&&i.closeUpdateTableModal(...e))},"Close"),t[22]||(t[22]=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",style:{background:"#007bff !important",color:"#fff !important",width:"120px"}},"Update Table",-1))])],32)]),t[24]||(t[24]=(0,s.Lk)("div",{class:"modal-footer"},null,-1))])])])])])}var Va={name:"TablePage",data(){return{searchQuery:"",tableItems:[],token:null,numOfGuest:null,tableNumber:null,availiable:!0,status:!1,editTableId:null,editTableNumber:"",editNumOfGuest:"",editStatus:!1,start_date:"",end_date:"",username:"",password:""}},computed:{filteredItems(){return(this.tableItems||[]).filter((e=>e.table_number&&e.table_number.toString().toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{async fetchItems(){try{const e=await j.get("/tables",{headers:{token:this.token}});200===e.data.status?(console.log(e.data.data),this.tableItems=e.data.data):window.alert("Error"+e.data.message)}catch(e){console.error("Error fetching items:",e)}},async addItem(){const e={table_number:parseInt(this.tableNumber),number_of_guests:parseInt(this.numOfGuest),status:this.status,availiable:this.availiable};try{const t=await j.post("/tables",e,{headers:{token:this.token}});200===t.status?(console.log("Item added successfully!"),this.fetchItems(),this.addTableModal._isShown?(this.tableNumber="",this.numOfGuest="",this.addTableModal.hide()):console.log("Modal is hidden.")):console.log("Failed to add item. Status:",t.status)}catch(t){console.error("Error adding item:",t)}},searchItem(){console.log("Search query:",this.searchQuery)},showModal(){this.addTableModal.show()},updateTableModal(){this.updateTableModal.show()},closeAddTableModal(){this.addTableModal.hide()},closeUpdateTableModal(){this.updateTableModal.hide()},openEditModal(e,t,o,a){this.editTableId=e,this.editTableNumber=t,this.editNumOfGuest=o,this.editStatus=a,this.updateTableModal.show()},async updateItem(){const e={table_id:this.editTableId,table_number:parseInt(this.editTableNumber),number_of_guests:parseInt(this.editNumOfGuest),status:this.editStatus};try{const t=await j.patch(`/tables/${this.editTableId}`,e,{headers:{token:this.token}});200===t.status?(this.updateTableModal.hide(),this.fetchItems()):(this.updateTableModal.hide(),window.alert("Failed To update"))}catch(t){console.error("Error updating item:",t)}}},mounted(){this.token=localStorage.getItem("token"),this.addTableModal=new W.aF(document.getElementById("addTableModal")),this.updateTableModal=new W.aF(document.getElementById("updateTableModal")),this.fetchItems()}};const $a=(0,Y.A)(Va,[["render",Xa],["__scopeId","data-v-426bf500"]]);var qa=$a;const Ja={class:"report-page mt-4"},Ka={class:"date-filters mb-4 row d-flex"},Qa={class:"col-lg-3"},ja={class:"col-lg-3"},Wa={class:"col-lg-4 d-flex justify-content-around mt-3"},Ha={class:"table table-bordered table-striped"},Ba={key:0,class:"alert alert-warning text-center"};function Ga(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",Ja,[t[10]||(t[10]=(0,s.Lk)("h2",{class:"text-center mb-4"},"Invoice Report",-1)),(0,s.Lk)("div",Ka,[(0,s.Lk)("div",Qa,[t[7]||(t[7]=(0,s.Lk)("label",{for:"startDate",class:"mr-2"},"Start Date:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>r.startDate=e),onChange:t[1]||(t[1]=(...e)=>i.fetchInvoices&&i.fetchInvoices(...e)),class:"form-control d-inline-block"},null,544),[[a.Jo,r.startDate]])]),(0,s.Lk)("div",ja,[t[8]||(t[8]=(0,s.Lk)("label",{for:"endDate",class:"mr-2"},"End Date:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>r.endDate=e),onChange:t[3]||(t[3]=(...e)=>i.fetchInvoices&&i.fetchInvoices(...e)),class:"form-control d-inline-block"},null,544),[[a.Jo,r.endDate]])]),(0,s.Lk)("div",Wa,[(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.fetchInvoices&&i.fetchInvoices(...e)),class:"btn btn-primary ml-2 mr-5",style:{width:"100px","line-height":"30px"}},"Filter"),(0,s.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.exportToCSV&&i.exportToCSV(...e)),class:"btn btn-danger ml-2"},"Export to PDF"),(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.exportToCSV&&i.exportToCSV(...e)),class:"btn btn-success ml-2"},"Export to CSV")])]),(0,s.Lk)("table",Ha,[t[9]||(t[9]=(0,s.Lk)("thead",{class:"thead-dark"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Invoice Number"),(0,s.Lk)("th",null,"Date"),(0,s.Lk)("th",null,"Table Number"),(0,s.Lk)("th",null,"Total Amount"),(0,s.Lk)("th",null,"Payment Method"),(0,s.Lk)("th",null,"Paid Status")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.invoices,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,l.v_)(e.invoice_number),1),(0,s.Lk)("td",null,(0,l.v_)(i.formatDate(e.created_at)),1),(0,s.Lk)("td",null,(0,l.v_)(e.table_number),1),(0,s.Lk)("td",null,"$"+(0,l.v_)(e.total_amount.toFixed(2)),1),(0,s.Lk)("td",null,(0,l.v_)(e.payment_method),1),(0,s.Lk)("td",null,(0,l.v_)(e.payment_status),1)])))),128))])]),0===r.invoices.length?((0,s.uX)(),(0,s.CE)("div",Ba," No invoices found for the selected date range. ")):(0,s.Q3)("",!0)])}var za={name:"ReportPage",data(){return{invoices:[],startDate:"",endDate:"",token:null}},mounted(){this.token=localStorage.getItem("token")},methods:{async fetchInvoices(){try{const e=await j.get(`/invoicesByDates/${this.startDate}/${this.endDate}`,{headers:{token:this.token}});200===e.status?this.invoices=e.data:(console.error("Failed to fetch invoices:",e.status),window.alert(`Failed to fetch invoices: ${e.status}`))}catch(e){console.error("Error fetching invoices:",e)}},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},exportToCSV(){}}};const Ya=(0,Y.A)(za,[["render",Ga],["__scopeId","data-v-9f56a7e0"]]);var Za=Ya;const es={class:"menu-page"},ts={style:{"margin-left":"25px"}},os={class:"row d-flex justify-content-between",style:{margin:"15px"}},as={class:"col-auto"},ss={class:"col-auto"},ls={class:"section table-section card border-0 shadow"},ns={class:"table-responsive"},rs={class:"table table-hover"},is={class:"list-inline m-0"},ds={class:"list-inline-item"},cs=["onClick"],us={class:"modal fade",id:"addUserModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ms={class:"modal-dialog modal-lg",role:"document"},ps={class:"modal-content"},hs={class:"modal-body"},ks={class:"form-group row"},bs={class:"col-sm-10"},gs={class:"form-group row"},fs={class:"col-sm-10"},Ls={class:"form-group row"},vs={class:"col-sm-10"},ys={class:"form-group row"},Is={class:"col-sm-10"},ws={class:"form-group row"},_s={class:"col-sm-10"},Cs={class:"form-group row",style:{"justify-content":"center","margin-top":"30px"}},Ms={class:"modal fade",id:"updateUserModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Es={class:"modal-dialog modal-lg",role:"document"},Ss={class:"modal-content"},Ns={class:"modal-body"},xs={class:"form-group row"},Us={class:"col-sm-10"},Fs={class:"form-group row"},Ps={class:"col-sm-10"},Ts={class:"form-group row"},Os={class:"col-sm-10"},As={class:"form-group row"},Ds={class:"col-sm-10"},Rs={class:"form-group row"},Xs={class:"col-sm-10"},Vs={class:"form-group row btn-groups",style:{"justify-content":"center","margin-top":"30px"}};function $s(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",es,[t[36]||(t[36]=(0,s.Lk)("h2",{class:"text-center"},"User Page",-1)),(0,s.Lk)("div",ts,[(0,s.Lk)("div",os,[(0,s.Lk)("div",as,[(0,s.Lk)("button",{type:"button",class:"btn btn-success btn-lg",onClick:t[0]||(t[0]=(...e)=>i.showUserModal&&i.showUserModal(...e))},"Add User")]),(0,s.Lk)("div",ss,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.searchQuery=e),type:"text",class:"filter",placeholder:"Search..."},null,512),[[a.Jo,r.searchQuery]])])]),(0,s.Lk)("div",ls,[(0,s.Lk)("div",ns,[(0,s.Lk)("table",rs,[t[19]||(t[19]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"#"),(0,s.Lk)("th",null,"User Name"),(0,s.Lk)("th",null,"Email"),(0,s.Lk)("th",null,"Role"),(0,s.Lk)("th",null,"Phone"),(0,s.Lk)("th",null,"Password"),(0,s.Lk)("th",null,"Action")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.filteredItems,((e,o)=>((0,s.uX)(),(0,s.CE)("tr",{key:o},[(0,s.Lk)("td",null,(0,l.v_)(o+1),1),(0,s.Lk)("td",null,(0,l.v_)(e.name),1),(0,s.Lk)("td",null,(0,l.v_)(e.email),1),(0,s.Lk)("td",null,(0,l.v_)(e.user_role),1),(0,s.Lk)("td",null,(0,l.v_)(e.phone),1),(0,s.Lk)("td",null,(0,l.v_)(e.password),1),(0,s.Lk)("td",null,[(0,s.Lk)("ul",is,[t[17]||(t[17]=(0,s.Lk)("li",{class:"list-inline-item"},[(0,s.Lk)("button",{class:"btn btn-primary btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Add"},[(0,s.Lk)("i",{class:"fa fa-table"})])],-1)),(0,s.Lk)("li",ds,[(0,s.Lk)("button",{class:"btn btn-success btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit",onClick:t=>i.showUpdateUserModal(e.user_id,e.name,e.user_role,e.email,e.phone,e.password)},t[16]||(t[16]=[(0,s.Lk)("i",{class:"fa fa-edit"},null,-1)]),8,cs)]),t[18]||(t[18]=(0,s.Lk)("li",{class:"list-inline-item"},[(0,s.Lk)("button",{class:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Delete"},[(0,s.Lk)("i",{class:"fa fa-trash"})])],-1))])])])))),128))])])])]),(0,s.Lk)("div",us,[(0,s.Lk)("div",ms,[(0,s.Lk)("div",ps,[t[27]||(t[27]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"Add User"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",hs,[(0,s.Lk)("form",{onSubmit:t[8]||(t[8]=(0,a.D$)(((...e)=>i.addUserItems&&i.addUserItems(...e)),["prevent"]))},[(0,s.Lk)("div",ks,[t[20]||(t[20]=(0,s.Lk)("label",{for:"staticName",class:"col-sm-2 col-form-label"},"Name",-1)),(0,s.Lk)("div",bs,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"staticName","onUpdate:modelValue":t[2]||(t[2]=e=>r.name=e),required:""},null,512),[[a.Jo,r.name]])])]),(0,s.Lk)("div",gs,[t[21]||(t[21]=(0,s.Lk)("label",{for:"staticEmail",class:"col-sm-2 col-form-label"},"Email",-1)),(0,s.Lk)("div",fs,[(0,s.bo)((0,s.Lk)("input",{type:"email",class:"form-control",id:"staticEmail","onUpdate:modelValue":t[3]||(t[3]=e=>r.email=e),required:""},null,512),[[a.Jo,r.email]])])]),(0,s.Lk)("div",Ls,[t[22]||(t[22]=(0,s.Lk)("label",{for:"staticPhone",class:"col-sm-2 col-form-label"},"Phone",-1)),(0,s.Lk)("div",vs,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"staticPhone","onUpdate:modelValue":t[4]||(t[4]=e=>r.phone=e),required:""},null,512),[[a.Jo,r.phone]])])]),(0,s.Lk)("div",ys,[t[24]||(t[24]=(0,s.Lk)("label",{for:"staticRole",class:"col-sm-2 col-form-label"},"Role",-1)),(0,s.Lk)("div",Is,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.role=e),class:"form-select"},t[23]||(t[23]=[(0,s.Lk)("option",{value:"USER"},"USER",-1),(0,s.Lk)("option",{value:"WAITER"},"WAITER",-1),(0,s.Lk)("option",{value:"KITCHEN"},"KITCHEN",-1)]),512),[[a.u1,r.role]])])]),(0,s.Lk)("div",ws,[t[25]||(t[25]=(0,s.Lk)("label",{for:"inputPassword",class:"col-sm-2 col-form-label"},"Password",-1)),(0,s.Lk)("div",_s,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:"form-control",id:"inputPassword","onUpdate:modelValue":t[6]||(t[6]=e=>r.password=e),required:""},null,512),[[a.Jo,r.password]])])]),(0,s.Lk)("div",Cs,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",style:{"margin-right":"25px","line-height":"30px",width:"110px",background:"#db1f1f"},onClick:t[7]||(t[7]=(...e)=>i.closeAddUserModal&&i.closeAddUserModal(...e))},"Close"),t[26]||(t[26]=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",style:{background:"#007bff !important",color:"#fff !important",width:"120px","line-height":"30px"}},"Create User",-1))])],32)])])])]),(0,s.Lk)("div",Ms,[(0,s.Lk)("div",Es,[(0,s.Lk)("div",Ss,[t[35]||(t[35]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"Update User"),(0,s.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","data-bs-dismiss":"modal","aria-label":"Close"},[(0,s.Lk)("span",{"aria-hidden":"true"},"×")])],-1)),(0,s.Lk)("div",Ns,[(0,s.Lk)("form",{onSubmit:t[15]||(t[15]=(0,a.D$)(((...e)=>i.updateUsers&&i.updateUsers(...e)),["prevent"]))},[(0,s.Lk)("div",xs,[t[28]||(t[28]=(0,s.Lk)("label",{for:"staticName",class:"col-sm-2 col-form-label"},"Name",-1)),(0,s.Lk)("div",Us,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"staticName","onUpdate:modelValue":t[9]||(t[9]=e=>r.editName=e),required:""},null,512),[[a.Jo,r.editName]])])]),(0,s.Lk)("div",Fs,[t[29]||(t[29]=(0,s.Lk)("label",{for:"staticEmail",class:"col-sm-2 col-form-label"},"Email",-1)),(0,s.Lk)("div",Ps,[(0,s.bo)((0,s.Lk)("input",{type:"email",class:"form-control",id:"staticEmail","onUpdate:modelValue":t[10]||(t[10]=e=>r.editEmail=e),required:""},null,512),[[a.Jo,r.editEmail]])])]),(0,s.Lk)("div",Ts,[t[30]||(t[30]=(0,s.Lk)("label",{for:"staticPhone",class:"col-sm-2 col-form-label"},"Phone",-1)),(0,s.Lk)("div",Os,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"staticPhone","onUpdate:modelValue":t[11]||(t[11]=e=>r.editPhone=e),required:""},null,512),[[a.Jo,r.editPhone]])])]),(0,s.Lk)("div",As,[t[32]||(t[32]=(0,s.Lk)("label",{for:"staticRole",class:"col-sm-2 col-form-label"},"Role",-1)),(0,s.Lk)("div",Ds,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>r.editRole=e),class:"form-select"},t[31]||(t[31]=[(0,s.Lk)("option",{value:"USER"},"ADMIN",-1),(0,s.Lk)("option",{value:"WAITER"},"WAITER",-1),(0,s.Lk)("option",{value:"KITCHEN"},"KITCHEN",-1)]),512),[[a.u1,r.editRole]])])]),(0,s.Lk)("div",Rs,[t[33]||(t[33]=(0,s.Lk)("label",{for:"inputPassword",class:"col-sm-2 col-form-label"},"Password",-1)),(0,s.Lk)("div",Xs,[(0,s.bo)((0,s.Lk)("input",{type:"password",class:"form-control",id:"inputPassword","onUpdate:modelValue":t[13]||(t[13]=e=>r.editPassword=e),required:""},null,512),[[a.Jo,r.editPassword]])])]),(0,s.Lk)("div",Vs,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",id:"btnClose",onClick:t[14]||(t[14]=(...e)=>i.closeUpdateUserModal&&i.closeUpdateUserModal(...e))},"Close"),t[34]||(t[34]=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",id:"btnUpdate"},"Update User",-1))])],32)])])])])])])}var qs={name:"AdminiPage",data(){return{searchQuery:"",token:null,users:[],name:"",email:"",phone:"",password:"",role:"",editName:"",editEmail:"",editRole:"",editPhone:"",editPassword:"",editUserId:""}},methods:{async fetchUsers(){try{const e=await j.get("/users");console.log(e.data),200===e.status?(this.users=e.data,console.log(this.users)):window.alert("Error"+e.data.message)}catch(e){e.response&&401===e.response.status?(alert("Your session has expired. Please log in again."),this.$router.push("/")):(console.error("Error fetching items:",e),alert("Failed to load the User. Please try again later."))}},async addUserItems(){const e={name:this.name,email:this.email,phone:this.phone,password:this.password,user_role:this.role};try{const t=await j.post("/users/signup",e);200===t.status?(console.log("Item added successfully!"),this.fetchUsers(),this.addUserModal._isShown?(this.name="",this.email="",this.phone="",this.password="",this.addUserModal.hide()):console.log("Modal is hidden.")):(console.log("Failed to add item. Status:",t.status),window.alert(t.status))}catch(t){console.error("Error adding item:",t)}},async updateUsers(){const e={name:this.editName,user_role:this.editRole,email:this.editEmail,phone:this.editPhone,password:this.editPassword};try{const t=await j.patch(`/users/${this.editUserId}`,e,{headers:{token:this.token}});200===t.status?(this.updateUserModal.hide(),this.fetchUsers()):(this.updateFoodModal.hide(),window.alert("Failed To user update"))}catch(t){console.error("Error updating user:",t)}},showUserModal(){this.addUserModal.show()},showUpdateUserModal(e,t,o,a,s,l){this.editUserId=e,this.editName=t,this.editRole=o,this.editEmail=a,this.editPhone=s,this.editPassword=l,this.updateUserModal.show()},closeAddUserModal(){this.addUserModal.hide()},closeUpdateUserModal(){this.updateUserModal.hide()}},mounted(){this.token=localStorage.getItem("token"),this.fetchUsers(),this.addUserModal=new W.aF(document.getElementById("addUserModal")),this.updateUserModal=new W.aF(document.getElementById("updateUserModal"))},computed:{filteredItems(){const e="string"===typeof this.searchQuery?this.searchQuery.toLowerCase():"";return this.users.filter((t=>{if(!t||"string"!==typeof t.name)return!1;const o=`${t.name.toLowerCase()}`;return o.includes(e)}))}}};const Js=(0,Y.A)(qs,[["render",$s]]);var Ks=Js;function Qs(e,t,o,a,l,n){const r=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(r)])}var js={name:"MinimalLayout"};const Ws=(0,Y.A)(js,[["render",Qs]]);var Hs=Ws;const Bs={class:"kitchen-page"},Gs={class:"d-flex flex-wrap",id:"orderItems"},zs={class:"card m-2"},Ys={class:"card-title p-3"},Zs={class:"card-body"},el={class:"list-group list-group-numbered"},tl={class:"ms-2 me-auto"},ol={class:"badge bg-primary rounded-pill"},al={class:"mt-3",style:{"align-items":"center"}},sl=["onClick"];function ll(e,t,o,a,n,r){return(0,s.uX)(),(0,s.CE)("div",Bs,[(0,s.Lk)("div",Gs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.ordersWithItems,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.order_id},[(0,s.Lk)("div",zs,[(0,s.Lk)("div",Ys,[(0,s.Lk)("div",null,[t[0]||(t[0]=(0,s.Lk)("strong",null,"Order ID:",-1)),(0,s.eW)(" "+(0,l.v_)(e.Order.order_id),1)]),t[2]||(t[2]=(0,s.Lk)("strong",null,"Table Number:",-1)),(0,s.eW)(" "+(0,l.v_)(e.Order.table_number)+" ",1),(0,s.Lk)("div",null,[t[1]||(t[1]=(0,s.Lk)("strong",null,"Waiter Name :",-1)),(0,s.eW)(" "+(0,l.v_)(e.Order.created_by),1)])]),(0,s.Lk)("div",Zs,[(0,s.Lk)("ol",el,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.order_items,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.food_id,class:"list-group-item d-flex justify-content-between align-items-start"},[(0,s.Lk)("div",tl,[(0,s.Lk)("strong",null,(0,l.v_)(e.food_name),1)]),(0,s.Lk)("span",ol,(0,l.v_)(e.quantity),1)])))),128))]),(0,s.Lk)("div",al,[(0,s.Lk)("input",{type:"button",class:"btn btn-primary",value:"Complete",onClick:t=>r.completePrepare(e.Order)},null,8,sl)])])])])))),128))])])}var nl={name:"KitchenPage",data(){return{token:null,orderId:"",orders:[],ordersWithItems:[],orderData:{order_id:"",table_number:"",total_count:0,payment_due:0},userRole:"",userName:"",userId:""}},mounted(){this.token=localStorage.getItem("token"),this.userRole=localStorage.getItem("userRole"),this.userName=localStorage.getItem("userName"),this.userId=localStorage.getItem("userId"),this.fetchOrders(),""!=this.orderId&&this.getOrderItems()},methods:{async fetchOrders(){try{const e=await j.get("/orderswithitems",{headers:{token:this.token}});this.ordersWithItems=e.data,console.log(e)}catch(e){console.log("Error fetching orders:",e)}},async getOrderItems(){try{console.log("token",this.token),console.log("OrderId",this.orderId);const e=await j.get(`/orderItems-order/${this.orderId}`,{headers:{token:this.token}});200===e.status&&(this.orderData.table_number=e.data[0].table_number,this.orderData.total_count=e.data[0].total_count,this.orderData.payment_due=e.data[0].payment_due,this.orderItems=e.data[0].order_items,console.log(this.orderItems))}catch(e){console.log("Error",e)}},async completePrepare(e){const t={order_id:e.order_id,prepare_status:"Ready",created_by:this.userName,user_id:this.userId};try{const o=await j.patch(`/orders/${e.order_id}`,t,{headers:{token:this.token}});200===o.status?this.fetchOrders():window.alert("Failed To update")}catch(o){console.error("Error updating item:",o)}}},created(){G.on("refreshOrders",(()=>{this.fetchOrders()}))},beforeUnmount(){J.connection&&J.connection.close()}};const rl=(0,Y.A)(nl,[["render",ll]]);var il=rl;const dl=[{path:"/",name:"LoginForm",component:ke},{path:"/signup",name:"SignupForm",component:Fe},{path:"/dashboard",name:"DashboardPage",component:Ae},{path:"/menu",name:"MenuPage",component:kt},{path:"/food",name:"FoodPage",component:lo},{path:"/order",name:"OrderPage",component:To},{path:"/viewOrder",name:"ViewOrderPage",component:la},{path:"/table",name:"TablePage",component:qa},{path:"/report",name:"ReportPage",component:Za},{path:"/administration",name:"AdminiPage",component:Ks},{path:"/invoice/:orderId",name:"InvoiceForm",component:oa,props:!0,meta:{requiresAuth:!0}},{path:"/invoice/:orderId",name:"InvoiceForm",component:oa,props:!0,meta:{layout:Hs}},{path:"/kitchen",name:"Kitchenpage",component:il}],cl=(0,te.aE)({history:(0,te.LA)("/frontend/"),routes:dl});var ul=cl,ml=o(4692),pl=o.n(ml);async function hl(){try{const e=await fetch("/config/config.json"),t=await e.json();t.VUE_APP_API_BASE_URL&&(K.A.defaults.baseURL=t.VUE_APP_API_BASE_URL)}catch(e){console.error("Failed to load config:",e)}}window.$=pl(),window.jQuery=pl(),hl().then((()=>{(0,a.Ef)(ee).use(ul).mount("#app")}))},808:function(e,t,o){e.exports=o.p+"media/mixkit-clear-announce-tones-2861.0e789970.wav"},5105:function(e,t,o){e.exports=o.p+"media/school-bell-87744.9e71a45c.mp3"},5906:function(e,t,o){e.exports=o.p+"img/table-5356682.109ceeac.jpg"}},t={};function o(a){var s=t[a];if(void 0!==s)return s.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,a,s,l){if(!a){var n=1/0;for(c=0;c<e.length;c++){a=e[c][0],s=e[c][1],l=e[c][2];for(var r=!0,i=0;i<a.length;i++)(!1&l||n>=l)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(r=!1,l<n&&(n=l));if(r){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[a,s,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/frontend/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,l,n=a[0],r=a[1],i=a[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(i)var c=i(o)}for(t&&t(a);d<n.length;d++)l=n[d],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},a=self["webpackChunkrestaurant_management_frontend"]=self["webpackChunkrestaurant_management_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(3807)}));a=o.O(a)})();
//# sourceMappingURL=app.1c207314.js.map